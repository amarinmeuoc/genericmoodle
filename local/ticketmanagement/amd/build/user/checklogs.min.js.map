{"version":3,"file":"checklogs.min.js","sources":["../../src/user/checklogs.js"],"sourcesContent":["define(['core/modal',\n    'core_form/modalform',\n    'core/toast',\n    'core/notification',\n    'local_ticketmanagement/funciones_comunes'], \n    function(ModalFactory, ModalForm, addToast, displayException, funcionesComunes){\n\nconst url=M.cfg.wwwroot+'/webservice/rest/server.php';\nconst token=document.querySelector('input[name=\"token\"]').value;\nconst init =() => {\n    \n    const logs=document.querySelectorAll('.logs');\n\n    logs.forEach((node)=>{\n        node.addEventListener('click',(e)=>{\n            showTicketActions(e);\n        })\n    })\n}\n\nconst showTicketActions=(e)=>{\n    e.stopPropagation();\n    const ticketId=e.target.dataset.ticketid;\n    let xhr = new XMLHttpRequest();\n    \n    //Se prepara el objeto a enviar\n    const formData= new FormData();\n    formData.append('wstoken',token);\n    formData.append('wsfunction', 'local_ticketmanagement_load_actions');\n    formData.append('moodlewsrestformat', 'json');\n    formData.append('params[0][ticketid]',ticketId);\n    \n\n    xhr.open('POST',url,true);\n    xhr.send(formData);\n\n    xhr.onload = (ev)=> {\n        funcionesComunes.reqHandlerLoadActions(xhr);\n    }\n\n    xhr.onerror = ()=> {\n        rejectAnswer(xhr);\n    }\n}\n\n\n\n\n\n    \nreturn {\n    init:init\n  } \n\n});"],"names":["define","ModalFactory","ModalForm","addToast","displayException","funcionesComunes","url","M","cfg","wwwroot","token","document","querySelector","value","showTicketActions","e","stopPropagation","ticketId","target","dataset","ticketid","xhr","XMLHttpRequest","formData","FormData","append","open","send","onload","ev","reqHandlerLoadActions","onerror","rejectAnswer","init","querySelectorAll","forEach","node","addEventListener"],"mappings":"AAAAA,+CAAO,CAAC,aACJ,sBACA,aACA,oBACA,6CACA,SAASC,aAAcC,UAAWC,SAAUC,iBAAkBC,wBAE5DC,IAAIC,EAAEC,IAAIC,QAAQ,8BAClBC,MAAMC,SAASC,cAAc,uBAAuBC,MAYpDC,kBAAmBC,IACrBA,EAAEC,wBACIC,SAASF,EAAEG,OAAOC,QAAQC,aAC5BC,IAAM,IAAIC,qBAGRC,SAAU,IAAIC,SACpBD,SAASE,OAAO,UAAUf,OAC1Ba,SAASE,OAAO,aAAc,uCAC9BF,SAASE,OAAO,qBAAsB,QACtCF,SAASE,OAAO,sBAAsBR,UAGtCI,IAAIK,KAAK,OAAOpB,KAAI,GACpBe,IAAIM,KAAKJ,UAETF,IAAIO,OAAUC,KACVxB,iBAAiByB,sBAAsBT,MAG3CA,IAAIU,QAAU,KACVC,aAAaX,aASd,CACHY,KA1CQ,KAEGtB,SAASuB,iBAAiB,SAEhCC,SAASC,OACVA,KAAKC,iBAAiB,SAAStB,IAC3BD,kBAAkBC"}
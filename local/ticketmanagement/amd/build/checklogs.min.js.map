{"version":3,"file":"checklogs.min.js","sources":["../src/checklogs.js"],"sourcesContent":["import ModalForm from 'core_form/modalform';\nimport Notification from 'core/notification';\nimport {add as addToast} from 'core/toast';\nimport {get_string as getString} from 'core/str';\n\nconst url=M.cfg.wwwroot+'/webservice/rest/server.php';\nconst token=document.querySelector('input[name=\"token\"]').value;\nexport const init =() => {\n    \n    const logs=document.querySelectorAll('.logs');\n\n    logs.forEach((node)=>{\n        node.addEventListener('click',(e)=>{\n            showTicketActions(e);\n        })\n    })\n}\n\nconst showTicketActions=(e)=>{\n    e.stopPropagation();\n    const ticketId=e.target.dataset.ticketid;\n    const modalForm=new ModalForm({\n        formClass: \"\\\\local_ticketmanagement\\\\form\\\\ActionsFormPopup\",\n        args: {num_ticket: ticketId},\n        modalConfig: {title: `Ticket details: #${ticketId}`},\n        returnFocus:e.target\n    });\n\n    modalForm.show();\n\n\n    modalForm.addEventListener(modalForm.events.FORM_SUBMITTED, (e)=>{\n        //Se actualiza la pagina principal con los nuevos valores y se envia email de notificaciÃ³n\n    });\n\n    // Listen for the modal LOADED event\n    modalForm.addEventListener(modalForm.events.LOADED, (e) => {\n        // Get the button after the modal is fully loaded\n        // Get the modal element after it is loaded\n        const formElement=e.target;\n        \n    });\n}\n\n\n\nconst areElementsLoaded = (selector) => {\n    return new Promise((resolve) => {\n        const checkElements = () => {\n            const elements = document.querySelectorAll(selector);\n            if (elements.length > 0 && Array.from(elements).every(elem => elem !== null)) {\n                resolve(elements);\n            } else {\n                requestAnimationFrame(checkElements);\n            }\n        };\n        checkElements();\n    });\n  };"],"names":["M","cfg","wwwroot","document","querySelector","value","querySelectorAll","forEach","node","addEventListener","e","showTicketActions","stopPropagation","ticketId","target","dataset","ticketid","modalForm","ModalForm","formClass","args","num_ticket","modalConfig","title","returnFocus","show","events","FORM_SUBMITTED","LOADED"],"mappings":"kbAKUA,EAAEC,IAAIC,QACJC,SAASC,cAAc,uBAAuBC,oBACvC,KAEJF,SAASG,iBAAiB,SAEhCC,SAASC,OACVA,KAAKC,iBAAiB,SAASC,IAC3BC,kBAAkBD,gBAKxBC,kBAAmBD,IACrBA,EAAEE,wBACIC,SAASH,EAAEI,OAAOC,QAAQC,SAC1BC,UAAU,IAAIC,mBAAU,CAC1BC,UAAW,mDACXC,KAAM,CAACC,WAAYR,UACnBS,YAAa,CAACC,iCAA2BV,WACzCW,YAAYd,EAAEI,SAGlBG,UAAUQ,OAGVR,UAAUR,iBAAiBQ,UAAUS,OAAOC,gBAAiBjB,QAK7DO,UAAUR,iBAAiBQ,UAAUS,OAAOE,QAASlB,IAG/BA,EAAEI"}